<div class="container pt-3 mb-3">
  <div class="my-4 d-flex row align-items-center">
    <div class="col-5">
      <div class="d-flex gap-2 align-items-center">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="UniProt identifier" [(ngModel)]="uniProtId" (keydown.enter)="searchUniProt()">
          <button type="reset" (click)="uniProtId = ''; searchUniProt()" class="btn btn-outline-warning">
            <i class="bi bi-x-lg"></i>
          </button>
          <button type="submit" (click)="searchUniProt()" class="btn btn-outline-primary" style="min-width: 95px">
            Search
            <i class="bi bi-search"></i>
          </button>
        </div>
        <span class="badge" [ngClass]="totalItems$.value == 0 ? 'bg-danger' : 'bg-success'">
          {{totalItems$.value == 1 ? totalItems$.value + ' entry' : totalItems$.value + ' entries'}}
        </span>
      </div>
    </div>
    <div class="col-3 ms-auto">
      <div class="d-flex align-items-center justify-content-end">
        <span class="me-2" style="min-width: fit-content">Items per page</span>
        <select class="form-select" id="itemsPerPage" (change)="onItemsPerPageChange($event)" style="max-width: 70px">
          <option value="5">5</option>
          <option value="10">10</option>
          <option value="15">15</option>
          <!-- Add more options as needed -->
        </select>
      </div>
    </div>

    <div class="col-auto">
      <nav aria-label="Page navigation">
        <ul class="pagination justify-content-end mb-0">

          <li class="page-item" [class.disabled]="currentPage === 1">
            <a class="page-link" (click)="currentPage = 1">First</a>
          </li>
          <li class="page-item" [class.disabled]="currentPage === 1">
            <a class="page-link" (click)="currentPage = currentPage - 1" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
          <li class="page-item" *ngFor="let pageNumber of getPageNumbers()">
            <a class="page-link" [class.active]="pageNumber === currentPage"
               (click)="currentPage = pageNumber">
              {{pageNumber}}
            </a>
          </li>
          <li class="page-item" [class.disabled]="currentPage === totalPages()">
            <a class="page-link" (click)="currentPage = currentPage + 1" aria-label="next">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <div class="d-flex flex-row gap-2">
    <!--    <button type="button" class="btn btn-primary" (click)="searchRDFData()">-->
    <!--      Search RDF Data-->
    <!--    </button>-->
    <!--    <button type="button" class="btn btn-primary" (click)="numberOfUniProtProteins()">-->
    <!--      Number of UniProt proteins-->
    <!--    </button>-->
    <!--    <button type="button" class="btn btn-primary" (click)="proteinInGraph()">-->
    <!--      Show if a protein is in a resource-->
    <!--    </button>-->
    <!--    <button type="button" class="btn btn-primary" (click)="createRegistry()">-->
    <!--      Registry-->
    <!--    </button>-->
  </div>

  <ng-container *ngIf="pagination$ | async"></ng-container>

  <div *ngIf="(rdfData$ | async) as rdfData; else loadingSpinner" class="d-flex gap-3 flex-column">
    <ng-container *ngIf="rdfData.length > 0; else noData">
      <ng-container *ngFor="let protein of rdfData">
        <app-protein-row [protein]="protein"></app-protein-row>
      </ng-container>
    </ng-container>
  </div>
</div>


<ng-template #loadingSpinner>
  <div class="d-flex mb-3 absolute-center">
    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
</ng-template>

<ng-template #noData>
  <div class="d-flex mb-3 absolute-center">
    <div class="alert alert-primary" role="alert">
      No proteins found
    </div>
  </div>
</ng-template>

<ng-container *ngIf="numberOfProteins$ | async"></ng-container>
